<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover"
    />
    <title>è¯·ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€</title>
  </head>
  <body style="background-color: #f7f7f7">
    <div id="arrow" style="overflow: hidden; display: none">
      <img src="arrow.png" style="width: 150px; float: right" />
    </div>
    <div
      id="tips"
      style="
        font-size: 30px;
        text-align: center;
        line-height: 50px;
        width: 100%;
      "
    ></div>
    <div style="text-align: center">
      <button
        id="copyBtn"
        style="
          display: none;
          margin-top: 30px;
          width: 150px;
          height: 50px;
          background-color: #c43979;
          border-radius: 15px;
          border: 1px solid #c43979;
          color: white;
          font-size: large;
        "
      >
        ç‚¹å‡»å¤åˆ¶
      </button>
    </div>

    <script>
      var url = document.location.toString();
      var urlParmStr = url.slice(url.indexOf("=") + 1);
      var ua = navigator.userAgent.toLowerCase();
      var isQQ = ua.indexOf("qq") != -1;
      var isWeixin = ua.indexOf("micromessenger") != -1;
      var isAndroid = ua.indexOf("android") != -1;
      var isIos = ua.indexOf("iphone") != -1 || ua.indexOf("ipad") != -1;

      var notice_openBrowser =
        "<h2>è¯·ç‚¹å‡»å³ä¸Šè§’ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€æœ¬é¡µé¢ã€‚</h2><br/>æˆ–ç‚¹å‡»ğŸ‘‡ğŸ»å¤åˆ¶é“¾æ¥åˆ°æµè§ˆå™¨æ‰“å¼€";

      // åˆ¤æ–­æ˜¯ä¸æ˜¯åœ¨å¾®ä¿¡å®¢æˆ·ç«¯æ‰“å¼€
      if (isWeixin || isQQ) {
        // åˆ¤æ–­æ˜¯åœ¨Androidçš„å¾®ä¿¡å®¢æˆ·ç«¯è¿˜æ˜¯Iosçš„å¾®ä¿¡å®¢æˆ·ç«¯
        document.getElementById("tips").innerHTML = notice_openBrowser;
        document.getElementById("arrow").style.display = "";
        const btn = document.getElementById("copyBtn");
        btn.style.display = "";
        btn.addEventListener("click", () => {
          // è¯¥æ–¹æ³•å¯ä»¥å†™å…¥ç‰¹å®šå­—ç¬¦ä¸²åˆ°æ“ä½œç³»ç»Ÿçš„å‰ªåˆ‡æ¿ï¼Œå¹¶è¿”å›ä¸€ä¸ªPromise
          // ä¸€æ—¦å‰ªè´´æ¿çš„å†…å®¹è¢«æ›´æ–°ï¼Œå®ƒå°±ä¼šè¢«è§£æã€‚å¦‚æœè°ƒç”¨è€…æ²¡æœ‰å†™å…¥å‰ªè´´æ¿çš„æƒé™ï¼Œåˆ™æ‹’ç»å†™å…¥å‰ªåˆ‡æ¿ï¼ˆrejectï¼‰
          navigator.clipboard
            .writeText(url)
            .then(() => {
              btn.innerText = "å¤åˆ¶æˆåŠŸ";
            })
            .catch(() => {
              btn.innerText = "å¤åˆ¶å¤±è´¥";
            });
        });
      } else {
        // ä¸æ˜¯å¾®ä¿¡å®¢æˆ·ç«¯ï¼Œç›´æ¥å¯ä»¥è®¿é—®é“¾æ¥
        if (urlParmStr == url) {
          urlParmStr = "https://chituai.github.io/antired";
        }
        console.log(urlParmStr);
        location.href = urlParmStr;
      }
    </script>
  </body>
</html>
