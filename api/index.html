<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover"
    />
    <title>请使用浏览器打开</title>
    <style>
      body {
        font-family: Arial, sans-serif;
      }
      #tips {
        font-size: 25px;
        text-align: center;
        line-height: 50px;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 10px;
        margin: 20px;
        background-color: #f8f8f8;
      }
    </style>
  </head>
  <body>
    <div
      id="tips"
      style="font-size: 25px; text-align: center; line-height: 50px"
    ></div>
    <script>
      var url = document.location.toString();
      var urlParmStr = url.slice(url.indexOf("=") + 1);
      var ua = navigator.userAgent.toLowerCase();
      var isQQ = ua.indexOf("qq") != -1;
      var isWeixin = ua.indexOf("micromessenger") != -1;
      var isAndroid = ua.indexOf("android") != -1;
      var isIos = ua.indexOf("iphone") != -1 || ua.indexOf("ipad") != -1;

      var notice_openBrowser =
        '<h2>请点击右上角，通过浏览器打开本页面。</h2><br />或点击下面的按钮复制到浏览器打开：<button id="copyButton">复制</button>';

      document.getElementById("copyButton").onclick = function () {
        navigator.clipboard
          .writeText(url)
          .then(() => {
            console.log("复制成功");
          })
          .catch((err) => {
            console.error("复制失败: ", err);
          });
      };
      // 判断是不是在微信客户端打开
      if (isWeixin || isQQ) {
        // 判断是在Android的微信客户端还是Ios的微信客户端
        if (isAndroid) {
          document.getElementById("tips").innerHTML = notice_openBrowser;
        } else if (isIos) {
          document.getElementById("tips").innerHTML = notice_openBrowser;
        } else {
          document.getElementById("tips").innerHTML = notice_openBrowser;
        }
      } else {
        // 不是微信客户端，直接可以访问链接
        if (urlParmStr == url) {
          urlParmStr = "https://chituai.github.io/antired";
        }
        console.log(urlParmStr);
        location.href = url;
      }
    </script>
    <script
      charset="UTF-8"
      id="LA_COLLECT"
      src="//sdk.51.la/js-sdk-pro.min.js"
    ></script>
    <script>
      LA.init({ id: "K8YSQIj3WDtj9gG6", ck: "K8YSQIj3WDtj9gG6" });
    </script>
  </body>
</html>
